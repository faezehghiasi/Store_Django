{% extends "base.html" %}
{% block title %}Checkout | Luxury Store{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <form method="post" action="{% url 'core:checkout' %}" class="card p-4 shadow needs-validation" novalidate>
        {% csrf_token %}

        <h3 class="fw-bold mb-4 text-center">Complete Your Purchase</h3>

        <!-- Street -->
        <div class="mb-3">
          <label for="street" class="form-label">Street Address</label>
          <input type="text" class="form-control" name="street" id="street" required>
          <div class="invalid-feedback">Please provide your street address.</div>
        </div>

        <!-- City -->
        <div class="mb-3">
          <label for="city" class="form-label">City</label>
          <input type="text" class="form-control" name="city" id="city" required>
          <div class="invalid-feedback">Please provide your city.</div>
        </div>

        <!-- State -->
        <div class="mb-3">
          <label for="state" class="form-label">State</label>
          <input type="text" class="form-control" name="state" id="state">
        </div>

        <!-- Postal Code -->
        <div class="mb-3">
          <label for="postal_code" class="form-label">Postal Code</label>
          <input type="text" class="form-control" name="postal_code" id="postal_code" required>
          <div class="invalid-feedback">Please provide your postal code.</div>
        </div>

        <!-- Country -->
        <div class="mb-3">
          <label for="country" class="form-label">Country</label>
          <input type="text" class="form-control" name="country" id="country" value="Iran" required>
          <div class="invalid-feedback">Please provide your country.</div>
        </div>

        <!-- Description (Optional) -->
        <div class="mb-3">
          <label for="description" class="form-label">Order Notes (Optional)</label>
          <textarea class="form-control" name="description" id="description" rows="3"></textarea>
        </div>

        <!-- Submit -->
        <div class="d-grid mt-4">
          <button type="submit" class="btn btn-primary btn-lg fw-bold">
            <i class="fas fa-lock me-2"></i> Continue to Payment
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

    <script>
document.addEventListener('DOMContentLoaded', function () {
  const form = document.querySelector('.needs-validation');

  form.addEventListener('submit', function (event) {
    let isValid = true;

    const requiredInputs = form.querySelectorAll('input[required], select[required], textarea[required]');
    requiredInputs.forEach(function (input) {
      if (!input.value.trim()) {
        input.classList.add('is-invalid');
        input.classList.remove('is-valid');
        isValid = false;
      } else {
        input.classList.remove('is-invalid');
        input.classList.add('is-valid');
      }
    });

    if (!isValid) {
      event.preventDefault();
      event.stopPropagation();
      form.classList.add('was-validated');
      const firstInvalid = form.querySelector('.is-invalid');
      if (firstInvalid) {
        firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
        firstInvalid.focus();
      }
    }
  });
});
</script>
{% endblock %}



